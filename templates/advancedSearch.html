<!--
# Copyright 2022 Sandra DÃ©rozier (INRAE)
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#    http://www.apache.org/licenses/LICENSE-2.0
#
#    Unless required by applicable law or agreed to in writing, software
#    distributed under the License is distributed on an "AS IS" BASIS,
#    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
#    See the License for the specific language governing permissions and
#    limitations under the License.
-->

{% extends 'main2' %}
{% block content %}
<section>

  <script type=text/javascript>
    $SCRIPT_ROOT = {{ request.script_root|tojson|safe }};
  </script>

  <script>
    var version = JSON.parse('{{ version | tojson | safe }}');
    var alvisir = JSON.parse('{{ alvisir | tojson | safe }}');
  </script>

  <link rel="stylesheet" href="{{ url_for('static', filename='css/selectize.css') }}" />
  <link rel="stylesheet" href="{{ url_for('static', filename='css/selectize.boostrap3.css') }}" />
  <link rel="stylesheet" href="{{ url_for('static', filename='css/additional.css') }}" />"
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.css" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/jQuery-QueryBuilder@2.5.2/dist/css/query-builder.default.css" />

  <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/sql-parser-mistic@1.2.3/browser/sql-parser.js"></script>
  <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/interactjs@1.6.2/dist/interact.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/jQuery-QueryBuilder@2.5.2/dist/js/query-builder.standalone.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/selectize.js/0.12.1/js/standalone/selectize.js"></script>
  <script type="module" src="{{ url_for('static', filename='js/advancedSearch.js') }}"></script>

<style>
  .rule-header{ display: inline }
  .error-container{ display: inline }
  .rule-filter-container{ display: inline }
  .rule-operator-container{ display: inline }
  .rule-value-container{ display: inline }
</style>

  <div style="margin:80px 0;"></div>

  <div style="margin-left: 5%;margin-right: 5%;">
    <h3><span style="color: #21517A;">Advanced search</span></h3>

    <div style="margin-left: 2%;margin-right: 2%;">
      <div class="d-flex justify-content-center text-info">
        <div id="spinner_advanced" class="spinner-border" role="status" style="display: none;">
          <span class="sr-only">Loading...</span>
        </div>
        <div id="spinner_advanced2" style="display: none;"><strong>&nbsp;&nbsp;Loading...</strong></div>
      </div>
      <div style="margin:40px 0;"></div>
    </div>


    
    <table  style="margin-left: 21%;margin-right: 20%;">
      <tr>       
        <div style="margin-left: 2%;margin-right: 2%;">
          <div class="container">
            <div class="row justify-content-md-center">
              <div class="col">
                <div id="builder"></div>

                  <td>
                    <button class=" btn btn-info parse-json ">Apply</button>
                  </td>

                  <td>
                    <button id="filter_score" type="button" class=".button-select-filter-NoHeight btn btn-info" data-toggle="collapse" data-target="#demo" disabled>Filter selection</button>
                  </td>

              </div>
            </div>
          </div>
        </div>
      </tr>
    </table>
        


    

    <div id="demo" class="collapse" style="margin-top: 1%;" align="center">
      <table align="center">
        <tr>
          <td id="filter_col7" data-column="6">&nbsp;&nbsp;&nbsp;Reliability &ge; &nbsp;</td>
          <td id="filter_col7_input" data-column="6" align="center">
            <input type="number" step="0.05" min="0" max="1" class="column_filter_short" id="score_adv">
          </td>
        </tr>
      </table>
    </div>
    

    <div style='margin:40px 0;'></div>

    <div id="hide" style="display:none">
      <table id="results_advanced" class="display responsive nowrap" style="width:100%">
        <thead>
            <tr>
              <th>Source text</th>
              <th>Scientific name of taxon</th>
              <th>Relation type</th>
              <th>OntoBiotope class</th>
              <th>QPS</th>
              <th>Source</th>
              <th>Reliability</th>
              <th>Occurrence in text (taxon)</th>
              <th>Occurrence in text (habitat)</th>
              <th>Full source text</th>
              <th>TaxonID</th>
              <th>Taxonomy hierarchical path</th>
              <th>ID OntoBiotope</th>
              <th>OntoBiotope hierarchical path</th>
            </tr>
        </thead>
      </table>
    </div>

  </div>

  <div style="margin:80px 0;"></div>

</section>
{% endblock %}
